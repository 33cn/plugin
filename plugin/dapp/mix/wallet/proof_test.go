package wallet

import (
	"encoding/hex"
	"fmt"
	"testing"

	"github.com/33cn/chain33/types"
	mixTy "github.com/33cn/plugin/plugin/dapp/mix/types"
	"github.com/stretchr/testify/assert"
)

func TestGetCommitValue(t *testing.T) {
	var note, transfer, minFee uint64
	note = 100
	transfer = 60
	minFee = 1
	_, err := getCommitValue(note, transfer, minFee)
	assert.Nil(t, err)

	//transfer > note
	note = 100
	transfer = 100
	minFee = 1
	_, err = getCommitValue(note, transfer, minFee)
	t.Log(err)
	assert.NotNil(t, err)

	note = 100
	transfer = 101
	minFee = 0
	_, err = getCommitValue(note, transfer, minFee)
	t.Log(err)
	assert.NotNil(t, err)

	//change=0
	note = 100
	transfer = 99
	minFee = 1
	_, err = getCommitValue(note, transfer, minFee)
	assert.Nil(t, err)

	a := "0a9c010a4d3136323433323838333039363632323833373538343930323239313730303834393836343035373630373234353332323934333436353837323033353436363930353333373131303333323139124b3238383637383239373931373237373235343930333236303134303538313534363138303135353433383231393339363836333632313634323236303434353739313434393237383237331a82033078656663333331616261616139653039353966636536356163343364626534306364646139356534356261636163613161326166626265366637323533633132326233346264323337353932343066306237623836653363343635666131343065666332636665623861653035366234323163303665353062396532646564636236383963336536656435363636373731343235663736313931653831356665666633646432393965633535386261323731343238333131623130353364376265633864646163313733393632326238666138326438373336666531623332633835376438343330643634646637336530643265326238373932396335633762366437336534383365363130303561313361376531643730636637653834656132613235343166373235363834656266613737653235313232326466313039336230313964646165623963376134393763316538653737386462313730323636323536666666363332643437363738626633366634383361373334346666326330"
	da, err := hex.DecodeString(a)
	assert.Nil(t, err)

	var data mixTy.DHSecret

	err = types.Decode(da, &data)
	assert.Nil(t, err)
	fmt.Println("data", data)

}
